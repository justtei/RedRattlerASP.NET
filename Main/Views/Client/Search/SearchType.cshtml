@using MSLivingChoices.Entities.Client.Search.Criteria
@using MSLivingChoices.Mvc.Uipc.Client.Helpers
@using MSLivingChoices.Mvc.Uipc.Client.ViewModels

@model SearchTypeStubSearchVm

@{
    ViewBag.Title = "SearchResult";
    Layout = "~/Views/Client/Shared/_SimpleLayout.cshtml";
}

@section scripts
{
    <script type="text/javascript">
       @* mslc.resolve(['lib/jQuery', 'lib/ko', 'client/controls/maps/states'], function($, ko, StatesMap) {
            var $target = $('.map'),
                model = new StatesMap(null, $target);

            ko.applyBindings(model, $target[0]);
        }, 'google-map-init');*@

        @*mslc.resolve(['client/widgets/googlePublisherTag'], function(gpt) {
            gpt.initSearchResultsSlots({
                country: '@Model.Criteria.CountryCode()',
                state: '@Model.Criteria.StateCode()',
                city: '@Model.Criteria.City()'
            });
        }, 'init-gpt');

        mslc.resolve(['client/analytics/google'], function(ga) {
            ga.trackPageView(@Html.Json(Model.Dimensions));
        }, 'ga-tracking');
            
          <== THE UI MUST BE CHANGED FROM HERE ==> For Both Pages
            *@
    </script>
    <script type="text/javascript">
        mslc.resolve([
                'lib/ko', 'client/widgets/refine', 'client/widgets/refine/aahAac', 'client/widgets/refine/shc'
            ],
            function(ko, Refine, AahAac, Shc) {
                
            },
            'init-refine');

        mslc.resolve(['client/widgets/qvInitializer'],
            function(initQv) {
               
            },
            'init-qv');

        mslc.resolve(['client/widgets/leadForm'],
            function(leadForm) {
                
            },
            'init-lead-form');

        mslc.resolve(['client/widgets/googlePublisherTag'],
            function(gpt) {
               
            },
            'init-gpt');

        mslc.resolve(['client/analytics/google'],
            function(ga) {
                
            },
            'ga-tracking');

        mslc.resolve(['client/widgets/communityUnit'],
            function() {
            },
            'init-community-unit');

        mslc.resolve(['client/ui/hintsManager'],
            function(hints) {
            },
            'init-hints');
    </script>
}
<div class="row">
    @*<div class="col-any-17">*@
    <div class="container">
        <div class="clearfix">
            <h1 class="header-brand-blue inline-block" style="text-align: center;">@Model.Seo.Header</h1>
        </div>

        <p class="ind">@Model.Seo.MarketCopy</p>

        <div class="map-container p-4">
            <div id="map" style="width:100%; height: 35em;"></div>
        </div>

        @if (Model.Result.Any())
        {
            <div class="row vpad-s">
                <div class="col-md-12">
                    <ul class="nav nav-tabs tabs-inline tabs-brand tabs-condensed txt-upper">
                        @foreach (var letter in Model.Result.Keys)
                        {
                            <li class="@(letter == Model.Result.Keys.First() ? "active" : string.Empty)">
                                <a href="#tab-@letter.ToLowerInvariant()" data-toggle="tab">@letter</a>
                            </li>
                        }
                    </ul>
                    <div class="tab-content filled clearfix">
                        @foreach (var letter in Model.Result.Keys)
                        {
                            <div class="tab-pane@(letter == Model.Result.Keys.First() ? " active" : string.Empty)" id="tab-@letter.ToLowerInvariant()">
                                <ul class="list-col-any-5">
                                    @foreach (var link in Model.Result[letter])
                                    {
                                        <li>
                                            <a class="@link.Css"
                                               href="@link.Href">
                                                @link.InnerText
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="container">
        @*<div class="col-any-7">*@
        @{ Html.RenderPartial("~/Views/Client/Search/Partial/Order.cshtml"); }
        @*</div>*@
    </div>
</div>
@*WE MUST CHANGE THESE PAGES UI FROM HERE OR IT WILL Malfuction The Direct Search Criteria. See The Difference When CLicking on Senior living And Types On Both Sites 1. Local host
    
    2. Test.seniorlivingchoices.com
*@
<script>
    function initMap() {
        console.log(@Html.Json(Model));
        var map = new window.google.maps.Map(document.getElementById('map'), {
            zoom: 5,
            center: new window.google.maps.LatLng(40.71383898, -101.312005126),
            mapTypeId: window.google.maps.MapTypeId.ROADMAP
        });
    }
</script>
